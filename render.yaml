# render.yaml - Fixed configuration

services:

# — Staging Service —

- type: web
  name: radiology-api-staging
  env: python
  plan: free
  repo: https://github.com/twocolddogs/HNZpriority.git
  branch: develop
  rootDir: ./radiology-cleaner-app/backend
  buildFilter:
  paths:
  - “radiology-cleaner-app/backend/**”
  envVars:
  - key: PYTHON_VERSION
    value: 3.11.6
  - key: PIP_VERSION
    value: 23.2.1
    buildCommand: “chmod +x build.sh && ./build.sh”
    startCommand: “gunicorn –bind 0.0.0.0:$PORT –workers 1 –threads 2 –timeout 120 –log-level info app:app”
    autoDeploy: true

# — Production Service —

- type: web
  name: radiology-api-prod
  env: python
  plan: free
  repo: https://github.com/twocolddogs/HNZpriority.git
  branch: main
  rootDir: ./radiology-cleaner-app/backend
  buildFilter:
  paths:
  - “radiology-cleaner-app/backend/**”
  envVars:
  - key: PYTHON_VERSION
    value: 3.11.6
  - key: PIP_VERSION
    value: 23.2.1
    buildCommand: “chmod +x build.sh && ./build.sh”
    startCommand: “gunicorn –bind 0.0.0.0:$PORT –workers 1 –threads 2 –timeout 120 –log-level info app:app”
    autoDeploy: false